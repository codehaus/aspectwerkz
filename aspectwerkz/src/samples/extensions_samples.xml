<!DOCTYPE aspectwerkz PUBLIC
    "-//AspectWerkz//DTD 0.8//EN"
    "http://aspectwerkz.codehaus.org/dtd/aspectwerkz_0_8.dtd">

<aspectwerkz id="extensions_samples">

    <introduction-def name="persistable" interface="org.codehaus.aspectwerkz.extension.persistence.Persistable"/>

    <advice-def name="makePersistent"
        class="org.codehaus.aspectwerkz.extension.persistence.DirtyFieldCheckAdvice"
        deployment-model="perJVM"
        attribute="persistent"/>

    <aspect name="Persistence">
        <bind-introduction class="examples.transparentpersistence.Counter">
            <introduction-ref name="persistable"/>
        </bind-introduction>

        <pointcut name="persistentFields" type="setField" pattern="* examples.transparentpersistence.Counter.m_counter"/>

        <bind-advice pointcut="persistentFields">
            <advice-ref name="makePersistent"/>
        </bind-advice>

    </aspect>



</aspectwerkz>