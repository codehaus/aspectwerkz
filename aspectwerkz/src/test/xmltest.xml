<?xml version="1.0"?>

<aspectwerkz>

    <!-- ============================================= -->
    <!--  Define the introductions                     -->
    <!-- ============================================= -->
    <introduction name="serializable" interface="java.io.Serializable" attribute="attribute"/>
    <introduction name="mixin" interface="mixins.Mixin" implementation="mixins.MixinImpl" deployment-model="perInstance" attribute="attribute"/>

    <!-- ============================================= -->
    <!--  Define the advices                           -->
    <!-- ============================================= -->
    <!-- leave deployment-model attribute empty => default PER_JVM -->
    <advice name="methodAdvicePerClass" advice="advices.MyMethodAdvice" deployment-model="perClass" attribute="attribute"/>
    <advice name="methodAdvicePerJVM" advice="advices.MyMethodAdvice" deployment-model="perJVM" attribute="attribute"/>

    <advice name="preAdvice" advice="advices.MyPreAdvice" deployment-model="perInstance" attribute="attribute"/>
    <advice name="postAdvice" advice="advices.MyPostAdvice" deployment-model="perThread" attribute="attribute"/>
    <advice name="throwsAdvice" advice="advices.MyThrowsAdvice" attribute="attribute"/>

    <!-- ============================================= -->
    <!--  Define the aspects                           -->
    <!-- ============================================= -->
    <aspect class="test.SomeClass">
        <introduction-ref name="serializable"/>
        <introduction-ref name="mixin"/>

        <pointcut type="method" pattern="someMemberMethod">
            <advice-ref name="methodAdvicePerClass"/>
            <advice-ref name="methodAdvicePerJVM"/>
        </pointcut>

        <pointcut type="method" pattern="someStaticMethod">
            <advice-ref name="preAdvice"/>
            <advice-ref name="methodAdvicePerClass"/>
            <advice-ref name="postAdvice"/>
        </pointcut>

        <pointcut type="setField" pattern="someField">
            <advice-ref name="preAdvice"/>
            <advice-ref name="postAdvice"/>
        </pointcut>

        <pointcut type="getField" pattern="someField">
            <advice-ref name="preAdvice"/>
            <advice-ref name="postAdvice"/>
        </pointcut>

        <pointcut type="throws" pattern="someMethod:someException">
            <advice-ref name="throwsAdvice"/>
        </pointcut>

        <pointcut type="method" pattern="set.*">
            <advice-ref name="methodAdvicePerJVM"/>
        </pointcut>
    </aspect>

</aspectwerkz>
